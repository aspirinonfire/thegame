<mat-card class="card mat-elevation-z8" >
    <mat-card-header>
        <mat-card-title fxFlexFill *ngIf="!!currentGame; else showNoGame">
            <strong>{{ currentGame.name }}</strong> {{ currentGame.dateCreated | date }}. Score: {{ gameScore | number }}
        </mat-card-title>
        <ng-template #showNoGame>
            No active game. Please start a new one!
        </ng-template>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content fxLayout="row" fxLayoutGap="0" fxLayoutAlign="center center">
        <div *ngIf="!!currentGame" class="us-map" fxFlexFill>
            <app-us-map [currentGame]="currentGameSpots" [pastGames]="pastGames" (click)="openSpotDialog()"></app-us-map>
            <mat-divider></mat-divider>
            <app-non-us-spots [currentGame]="currentGameSpots" [pastGames]="pastGames" (click)="openSpotDialog()"></app-non-us-spots>
            <div>
                <h4>Achievements:</h4>
                <div *ngIf="scoreMilestones.length > 0; else noAchievements">
                    <mat-chip-list aria-label="Non-US spots" cdkDropListOrientation="horizontal">
                        <mat-chip *ngFor="let milestone of scoreMilestones; trackBy: milestoneTrackBy" color="primary" [selected]="true"
                            [removable]="false">
                            {{ milestone }}
                        </mat-chip>
                    </mat-chip-list>
                </div>
                <ng-template #noAchievements>
                    <small>This is just a beginning...</small>
                </ng-template>
            </div>
        </div>
    </mat-card-content>
</mat-card>
<button *ngIf="currentGame; else showNewGameBtn" mat-mini-fab color="warn" (click)="finishGame()"
    id="finish-game" class="btn-sm fixed-bottom-left">
    <mat-icon>beenhere</mat-icon>
</button>
<ng-template #showNewGameBtn>
    <button *ngIf="!currentGame" mat-fab color="primary" id="open-state-dialog" class="fixed-bottom-right mat-elevation-z8"
        (click)="openNewGameDialog()" aria-label="Add">
        <mat-icon>add</mat-icon>
    </button>
</ng-template>